CREATE TABLE IF NOT EXISTS `VEHICLE` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `VIN` INT AUTO_INCREMENT PRIMARY KEY,
  `year` YEAR NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `model_id` INT NOT NULL,
  `make_id` INT NOT NULL,
  `customerDetails_id` INT NOT NULL,
  FOREIGN KEY (`model_id`) REFERENCES `MODEL`(`ID`)
     ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (`make_id`) REFERENCES `MAKE`(`ID`)
     ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (`customerDetails_id`) REFERENCES `CUSTOMERDETAILS`(`ID`)
     ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS `MAKE` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `make` VARCHAR(200) NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
)

CREATE TABLE IF NOT EXISTS `MODEL` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `model` VARCHAR(200) NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
)

CREATE TABLE IF NOT EXISTS `CUSTOMERDETAILS` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(200) NOT NULL,
  `email` VARCHAR(200) NOT NULL UNIQUE,
  `phone` VARCHAR(200) NOT NULL UNIQUE,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
)

CREATE TABLE IF NOT EXISTS `STAFFDETAILS` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(200) NOT NULL,
  `staffType_id` INT NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (staffType_id) REFERENCES STAFFTYPE(ID)
     ON DELETE CASCADE
     ON UPDATE CASCADE
)

CREATE TABLE IF NOT EXISTS `STAFFTYPE` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `name` ENUM('MANAGER', 'MECHANIC') NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
)

CREATE TABLE IF NOT EXISTS `SERVICESTATUS` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `name` ENUM('SCHEDULED', 'IN_PROGRESS', 'COMPLETED', 'CANCELLED') NOT NULL,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
)

CREATE TABLE IF NOT EXISTS `SERVICEMANAGEMENT` (
  `ID` INT AUTO_INCREMENT PRIMARY KEY,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `timeEstimate` INT NOT NULL,
  `customerDetails_id` INT NOT NULL,
  `staffDetails_id` INT NOT NULL, -- mechanic assigned
  `vehicle_id` INT NOT NULL,
  `serviceStatus_id` INT NOT NULL,
   FOREIGN KEY (customerDetails_id) REFERENCES CUSTOMERDETAILS(ID)
     ON DELETE CASCADE
     ON UPDATE CASCADE,
   FOREIGN KEY (staffDetails_id) REFERENCES STAFFDETAILS(ID)
     ON DELETE CASCADE
     ON UPDATE CASCADE,
   FOREIGN KEY (vehicle_id) REFERENCES VEHICLE(ID)
     ON DELETE CASCADE
     ON UPDATE CASCADE,
   FOREIGN KEY (serviceStatus_id) REFERENCES SERVICESTATUS(ID)
     ON DELETE CASCADE
     ON UPDATE CASCADE,
)